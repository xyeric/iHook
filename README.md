## iHook

Windows平台下的Hook操作库，可以跨进程读取目标进程运行过程中代码段任意位置的寄存器值以及内存值。

### 工作原理

iHook的实现原理为inline hook，网上有很多介绍，就是将Hook点替换成一条jmp汇编语句，当程序运行到Hook点时，自动跳转到我们设置的Hook处理过程中，执行完处理过程后，再通过一个jmp汇编语句跳回原来的位置。

（图片待补充）

iHook只能在自身运行的进程中设置Hook，如果需要跨进程执行，可以将操作界面封装成一个动态链接库(dll)，然后再通过一个入口程序，将iHook远程注入到目标进程。

### 代码结构

该项目中包含三个目录，分别是：
- iHook ，静态链接库(iHook.lib)，Hook核心代码，提供Hook操作接口。
- LuaHook  Hook动态链接库(LuaHook.dll)，基于iHook.lib的Lua代码Hook示例代码，用来提取某游戏运行过程中执行的Lua代码。
- Launch，入口程序(Launch.exe)，用于选择一个进程，然后将LuaHook.dii注入到目标进程。

### 编译安装

#### 编译环境

- 操作系统：Windows x86(x64)
- 编译环境：Visual Studio 2017
- 编译目标：Win32

##### 一、项目配置

由于代码提交的过程中，忽略了一些比较重的配置文件，所以直接从Github拉下来的项目配置与本地的配置有所差异，因此在编译之前修改一些项目配置信息，否则编译可能出错。

*1. 运行库*

需要更改为“多线程(MT)”，在Debug模式下需要更改为“多线程调试(/MTd)”，否则编辑可能会报stdafx.h头文件未引入的错误。

*1. 平台架构*

代码只做了x86的实现，x64平台下可能会存在兼容性问题，即使能够正常编译通过，也不一定能够正确运行（比如指针长度的变更导致读取了错误的内存地址等等）

*3. 字符集*

默认情况下字符集为“Unicode”，如编译结果出现乱码，可以在项目属性中更改字符集为“ASCII”。

### 使用说明

（待补充）

